# Техническое задание на проект: Tariff analysis
#### 1. Цель проекта
Создание сервиса для анализа расходов на мобильную связь. Сервис помогает выбрать наилучший тариф среди всех операторов мобильной связи, предоставляя самый дешёвый вариант для указанного количества минут и гигабайт в тарифе.

#### 2. Роли пользователей и целевая аудитория
- **Гость:** подбор самого дешёвого тарифа, по указанному количеству минут и гигабайт.
- **Авторизированный пользователь:** то же, что и для гостя, но с уведомлением о появлении более выгодного тарифа, а так же с возможностью просмотра истории изменения тарифов и расходов на них.
**Целевая аудитория:**
	Любой человек, решивший начать пользоваться мобильной связью или желающий поменять тариф на более выгодный.

### 3. Модели данных (сущности)
**Operator (Оператор связи)**: Справочник компаний-провайдеров сотовой связи.  
Поля: `name` (название), `logo` (логотип), `website` (адрес для парсинга тарифов), `color` (фирменный цвет для интерфейса).

**TariffPlan (Тарифный план)**: Основная сущность для сравнения, хранящая все условия тарифа.  
Поля: `name` (название), `operator` (связь ForeignKey с Operator), `description` (описание), `monthly_fee` (абонентская плата), `data_volume` (включённые ГБ), `minutes_volume` (включённые минуты), `overage_data_price` (цена за дополнительный ГБ), `overage_minute_price` (цена за дополнительную минуту), `is_archived` (флаг архивности тарифа), `description` (описание дополнительных условий тарифа).

**UserProfile (Профиль пользователя)**: Расширение стандартной модели пользователя Django. Хранит только текущие _плановые_ (ожидаемые) показатели пользователя, которые используются для мгновенного сравнения тарифов.  
Поля: `user` (связь OneToOne со встроенной моделью User), `avg_monthly_data` (ожидаемый расход ГБ в месяц), `avg_monthly_minutes` (ожидаемый расход минут в месяц), `current_tariff` (связь ForeignKey с TariffPlan, опционально, для отслеживания текущего тарифа пользователя).

**MonthlyConsumption (Журнал фактического потребления)**: **Ключевая модель для аналитики в Стратегии А**. Хранит историю фактических расходов, которую пользователь вводит вручную за каждый прошедший месяц.  
Поля: `user_profile` (связь ForeignKey с UserProfile), `year` (год), `month` (месяц), `actual_data_used` (фактически израсходованные ГБ), `actual_minutes_used` (фактически израсходованные минуты).

**TariffComparison (История сравнений)**: Фиксирует результаты работы сервиса по подбору тарифов. Необходима для анализа эффективности рекомендаций и формирования персонализированных отчётов.  
Поля: `user_profile` (связь ForeignKey с UserProfile), `tariff_plan` (связь ForeignKey с TariffPlan), `calculated_monthly_cost` (рассчитанная итоговая стоимость для пользователя), `user_data_input` (значение ГБ, на основе которого проводился расчёт), `user_minutes_input` (значение минут, на основе которого проводился расчёт), `is_recommended` (флаг, был ли этот тариф рекомендован как оптимальный в данном сравнении), `comparison_date` (дата и время операции).

#### 4. Ключевой функционал (User Stories)
- **Подбор самого выгодного тарифа:** Пользователь указывает количество минут и гигабайт, на основе который получает самый выгодный тариф среди всех операторов.
- **Визуализация:** В профиле пользователя показывается график изменения затраченных минут и гигабайт, а так же график абонентской платы.
- **Анализ и рекомендации:** Пользователю, если собрано достаточно статистики, может быть предложено изменить тариф на другой (Если, например, затраты минут и гигабайт стабильно растут, пользователю будут предложены тарифы с увеличенным количеством минут и гигабайт).
- **Обновление данных и уведомления:** Система обновляет существующие тарифы из сайтов операторов и при появлении более выгодных уведомляет об этом пользователей (Для последних данных о подборе тарифа)

#### 5. Внешние интеграции и аналитика
- **Интеграция:** Парсинг сайтов оператора мобильной связи для получения актуальных тарифов.
- **Аналитика:** Генерация изображений графиков через **Matplotlib**.